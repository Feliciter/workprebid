!function e(r,t,n){function i(a,s){if(!t[a]){if(!r[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=t[a]={exports:{}};r[a][0].call(c.exports,function(e){var t=r[a][1][e];return i(t||e)},c,c.exports,e,r,t,n)}return t[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,r,t){pbjsChunk([69],{383:function(e,r,t){e.exports=t(384)},384:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"FASTLANE_ENDPOINT",function(){return c}),t.d(r,"VIDEO_ENDPOINT",function(){return u}),t.d(r,"SYNC_ENDPOINT",function(){return p}),t.d(r,"spec",function(){return l}),r.hasVideoMediaType=b,r.masSizeOrdering=h,r.determineRubiconVideoSizeId=_,r.resetUserSync=function(){A=!1};var n=t(0),i=t(1),o=t(3),a=t(2);function s(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c="//fastlane.rubiconproject.com/a/api/fastlane.json",u="//fastlane-adv.rubiconproject.com/v1/auction/video",p="https://eus.rubiconproject.com/usync.html",f={1:"468x60",2:"728x90",5:"120x90",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",94:"970x310",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",229:"320x180",232:"580x400",257:"400x600"};n._each(f,function(e,r){return f[e]=r});var l={code:"rubicon",aliases:["rubiconLite"],supportedMediaTypes:[a.a,a.c],isBidRequestValid:function(e){return"object"===d(e.params)&&(!!/^\d+$/.test(e.params.accountId)&&!!x(e,!0))},buildRequests:function(e,r){var t=[],i=e.filter(function(e){return"video"===x(e)}).map(function(e){e.startTime=(new Date).getTime();var t=e.params,n=v(e,"video"),i={page_url:g(e,r),resolution:y(),account_id:t.accountId,integration:"pbjs_lite_v2.1.0-pre","x_source.tid":e.transactionId,timeout:r.timeout-(Date.now()-r.auctionStart+500),stash_creatives:!0,slots:[]},o={site_id:t.siteId,zone_id:t.zoneId,position:"atf"===t.position||"btf"===t.position?t.position:"unknown",floor:parseFloat(t.floor)>.01?t.floor:.01,element_id:e.adUnitCode,name:e.adUnitCode,width:n[0],height:n[1],size_id:_(e)};return t.video&&(i.ae_pass_through_parameters=t.video.aeParams,o.language=t.video.language),["inventory","visitor"].forEach(function(e){t[e]&&"object"===d(t[e])&&(o[e]={},Object.keys(t[e]).forEach(function(r){var n=t[e][r];Array.isArray(n)?o[e][r]=n:("string"==typeof n&&""!==n||"number"==typeof n)&&(o[e][r]=[n])}))}),t.keywords&&Array.isArray(t.keywords)&&(o.keywords=t.keywords),i.slots.push(o),r.gdprConsent&&("boolean"==typeof r.gdprConsent.gdprApplies&&(i.gdpr=Number(r.gdprConsent.gdprApplies)),i.gdpr_consent=r.gdprConsent.consentString),{method:"POST",url:u,data:i,bidRequest:e}});if(!0!==o.config.getConfig("rubicon.singleRequest"))t=i.concat(e.filter(function(e){return"banner"===x(e)}).map(function(e){var t=l.createSlotParams(e,r);return{method:"GET",url:c,data:l.getOrderedParams(t).reduce(function(e,r){var i=t[r];return n.isStr(i)&&""!==i||n.isNumber(i)?"".concat(e).concat(r,"=").concat(encodeURIComponent(i),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}}));else{var a=e.filter(function(e){return"banner"===x(e)}).reduce(function(e,r){return(e[r.params.siteId]=e[r.params.siteId]||[]).push(r),e},{});t=i.concat(Object.keys(a).map(function(e){var t=a[e];t.length>10&&(n.logWarn("Rubicon bid adapter Warning: single request mode has a limit of 10 bids: ".concat(t.length-10," bids were not sent")),t=t.slice(0,10));var i=l.combineSlotUrlParams(t.map(function(e){return l.createSlotParams(e,r)}));return{method:"GET",url:c,data:l.getOrderedParams(i).reduce(function(e,r){var t=i[r];return n.isStr(t)&&""!==t||n.isNumber(t)?"".concat(e).concat(r,"=").concat(encodeURIComponent(t),"&"):e},"")+"slots=".concat(t.length,"&rand=").concat(Math.random()),bidRequest:t}}))}return t},getOrderedParams:function(e){var r=/^tg_v/,t=/^tg_i/,n=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","rf","dt.id","dt.keyv","dt.pref","p_geo.latitude","p_geo.longitude","kw"].concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(["tk_flint","x_source.tid","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return n.concat(Object.keys(e).filter(function(e){return-1===n.indexOf(e)}))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var r=e.reduce(function(r,t,n){return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)||(r[i]=new Array(e.length)),r[i].splice(n,1,t[i])}),r},{}),t=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(r).forEach(function(e){var n=r[e].join(";"),i=n.match(t);r[e]=i?i[1]:n}),r},createSlotParams:function(e,r){e.startTime=(new Date).getTime();var t=e.params,n=v(e,"banner"),i=s(t.latLong||[],2),a=i[0],c=i[1],u={account_id:t.accountId,site_id:t.siteId,zone_id:t.zoneId,size_id:n[0],alt_size_ids:n.slice(1).join(",")||void 0,p_pos:"atf"===t.position||"btf"===t.position?t.position:"unknown",rp_floor:(t.floor=parseFloat(t.floor))>.01?t.floor:.01,rp_secure:"https:"===location.protocol?"1":"0",tk_flint:"pbjs_lite_v2.1.0-pre","x_source.tid":e.transactionId,p_screen_res:y(),kw:Array.isArray(t.keywords)?t.keywords.join(","):"",tk_user_key:t.userId,"p_geo.latitude":isNaN(parseFloat(a))?void 0:parseFloat(a).toFixed(4),"p_geo.longitude":isNaN(parseFloat(c))?void 0:parseFloat(c).toFixed(4),"tg_fl.eid":e.code,rf:g(e,r)};r.gdprConsent&&("boolean"==typeof r.gdprConsent.gdprApplies&&(u.gdpr=Number(r.gdprConsent.gdprApplies)),u.gdpr_consent=r.gdprConsent.consentString),null!==t.visitor&&"object"===d(t.visitor)&&Object.keys(t.visitor).forEach(function(e){null!=t.visitor[e]&&(u["tg_v.".concat(e)]=t.visitor[e].toString())}),null!==t.inventory&&"object"===d(t.inventory)&&Object.keys(t.inventory).forEach(function(e){null!=t.inventory[e]&&(u["tg_i.".concat(e)]=t.inventory[e].toString())});var p=function(){var e=(r=window.DigiTrust&&(o.config.getConfig("digiTrustId")||window.DigiTrust.getUser({member:"T9QSFKPDN9"})),r&&r.success&&r.identity||null);var r;if(!e||e.privacy&&e.privacy.optout)return[];return{"dt.id":e.id,"dt.keyv":e.keyv,"dt.pref":0}}();return Object.keys(p).forEach(function(e){u[e]=p[e]}),u},interpretResponse:function(e,r){var t=r.bidRequest;if(!(e=e.body)||"object"!==d(e))return[];var i=e.ads;return"object"!==d(t)||Array.isArray(t)||"video"!==x(t)||"object"!==d(i)||(i=i[t.adUnitCode]),!Array.isArray(i)||i.length<1?[]:i.reduce(function(r,i,c){if("ok"!==i.status)return r;var u,p,l=Array.isArray(t)?t[c]:t;if(l&&"object"===d(l)){var y={requestId:l.bidId,currency:"USD",creativeId:i.creative_id||"".concat(i.network||"","-").concat(i.advertiser||""),cpm:i.cpm||0,dealId:i.deal,ttl:300,netRevenue:o.config.getConfig("rubicon.netRevenue")||!1,rubicon:{advertiserId:i.advertiser,networkId:i.network}};if(i.creative_type&&(y.mediaType=i.creative_type),i.creative_type===a.c)y.width=l.params.video.playerWidth,y.height=l.params.video.playerHeight,y.vastUrl=i.creative_depot_url,y.impression_id=i.impression_id,y.videoCacheKey=i.impression_id;else{y.ad=(u=i.script,p=i.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(p,"'>\n<script type='text/javascript'>").concat(u,"<\/script>\n</div>\n</body>\n</html>"));var g=s(f[i.size_id].split("x").map(function(e){return Number(e)}),2);y.width=g[0],y.height=g[1]}y.rubiconTargeting=(Array.isArray(i.targeting)?i.targeting:[]).reduce(function(e,r){return e[r.key]=r.values[0],e},{rpfl_elemid:l.adUnitCode}),r.push(y)}else n.logError("Rubicon bid adapter Error: bidRequest undefined at index position:".concat(c),t,e);return r},[]).sort(function(e,r){return(r.cpm||0)-(e.cpm||0)})},getUserSyncs:function(e,r,t){if(!A&&e.iframeEnabled){var n="";return t&&"string"==typeof t.consentString&&("boolean"==typeof t.gdprApplies?n+="?gdpr=".concat(Number(t.gdprApplies),"&gdpr_consent=").concat(t.consentString):n+="?gdpr_consent=".concat(t.consentString)),A=!0,{type:"iframe",url:p+n}}},transformBidParams:function(e,r){return n.convertTypes({accountId:"number",siteId:"number",zoneId:"number"},e)}};function y(){return[window.screen.width,window.screen.height].join("x")}function g(e,r){var t=o.config.getConfig("pageUrl");return e.params.referrer?t=e.params.referrer:t||(t=r.refererInfo.referer),e.params.secure?t.replace(/^http:/i,"https:"):t}function v(e,r){var t=e.params;if("video"===r){var i=[];return t.video&&t.video.playerWidth&&t.video.playerHeight?i=[t.video.playerWidth,t.video.playerHeight]:Array.isArray(n.deepAccess(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?i=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(i=e.sizes[0]),i}var o=[];return Array.isArray(t.sizes)?o=t.sizes:void 0!==n.deepAccess(e,"mediaTypes.banner.sizes")?o=m(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?o=m(e.sizes):n.logWarn("Warning: no sizes are setup or found"),h(o)}function m(e){return n.parseSizesInput(e).reduce(function(e,r){var t=parseInt(f[r],10);return t&&e.push(t),e},[])}function b(e){return"object"===d(n.deepAccess(e,"params.video"))&&(e.mediaType===a.c||void 0!==n.deepAccess(e,"mediaTypes.".concat(a.c)))}function x(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(b(e)){if(void 0!==n.deepAccess(e,"mediaTypes.".concat(a.c))){if(-1===["outstream","instream"].indexOf(n.deepAccess(e,"mediaTypes.".concat(a.c,".context"))))return void(r&&n.logError("Rubicon bid adapter requires mediaTypes.video.context to be one of outstream or instream"))}else if(r&&n.logWarn("Rubicon video bid requested using legacy `adUnit.mediaType = `video``\nThis is deprecated\nPlease move towards the PBJS standard using mediaTypes object!"),isNaN(parseInt(n.deepAccess(e,"params.video.size_id"))))return void(r&&n.logError("Rubicon bid adapter needs params.video.size_id to be declared and an integer in order to process a legacy video request using mediaType == video"));return v(e,"video").length<2?void(r&&n.logError("Rubicon bid adapter could not determine the playerSize of the video\nplayerWidth and playerHeight are inferred from one of params.playerWidth/playerHeight or mediaTypes.video.playerSize or adUnit.sizes, in that order")):(r&&n.logMessage("Rubicon bid adapter making video request for adUnit",e.adUnitCode),"video")}return 0===v(e,"banner").length?void(r&&n.logError("Rubicon bid adapter could not determine the sizes for a banner request\nThey are inferred from one of params.sizes or mediaTypes.banner.sizes or adUnit.sizes, in that order")):(r&&n.logMessage("Rubicon bid adapter making banner request for adUnit",e.adUnitCode),"banner")}function h(e){var r=[15,2,9];return e.sort(function(e,t){var n=r.indexOf(e),i=r.indexOf(t);return n>-1||i>-1?-1===n?1:-1===i?-1:n-i:e-t})}function _(e){var r=parseInt(n.deepAccess(e,"params.video.size_id"));return isNaN(r)?"outstream"===n.deepAccess(e,"mediaTypes.".concat(a.c,".context"))?203:201:r}var A=!1;Object(i.registerBidder)(l)}},[383])},{}]},{},[1]);