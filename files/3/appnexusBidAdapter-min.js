!function e(r,a,n){function t(s,o){if(!a[s]){if(!r[s]){var d="function"==typeof require&&require;if(!o&&d)return d(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var p=a[s]={exports:{}};r[s][0].call(p.exports,function(e){var a=r[s][1][e];return t(a||e)},p,p.exports,e,r,a,n)}return a[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)t(n[s]);return t}({1:[function(e,r,a){pbjsChunk([169],{133:function(e,r,a){e.exports=a(134)},134:function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),a.d(r,"spec",function(){return h});var n=a(12),t=a(0),i=a(1),s=a(2),o=a(10),d=a.n(o),p=a(7),u=a.n(p);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function l(e){return function(e){if(Array.isArray(e)){for(var r=0,a=new Array(e.length);r<e.length;r++)a[r]=e[r];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var f=["id","mimes","minduration","maxduration","startdelay","skippable","playback_method","frameworks"],y=["age","external_uid","segments","gender","dnt","language"],b=["geo","device_id"],g=["enabled","dongle","member_id","debug_timeout"],v={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},icon:{serverName:"icon",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},h={code:"appnexus",aliases:["appnexusAst","brealtime","emxdigital","pagescience","defymedia","gourmetads","matomy","featureforward","oftmedia","districtm"],supportedMediaTypes:[s.a,s.c,s.b],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,r){var a,n=e.map(w),i=d()(e,C);i&&(a={},Object.keys(i.params.user).filter(function(e){return u()(y,e)}).forEach(function(e){return a[e]=i.params.user[e]}));var s,o=d()(e,P);o&&o.params&&o.params.app&&(s={},Object.keys(o.params.app).filter(function(e){return u()(b,e)}).forEach(function(e){return s[e]=o.params.app[e]}));var p,c=d()(e,R);c&&c.params&&o.params.app&&o.params.app.id&&(p={appid:c.params.app.id});var m={},f={},v=t.getCookie("apn_prebid_debug")||null;if(v)try{m=JSON.parse(v)}catch(e){t.logError("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{var h=d()(e,T);h&&h.debug&&(m=h.debug)}m&&m.enabled&&Object.keys(m).filter(function(e){return u()(g,e)}).forEach(function(e){f[e]=m[e]});var _=d()(e,A),k=_?parseInt(_.params.member,10):0,I={tags:l(n),user:a,sdk:{source:"pbjs",version:"2.1.0-pre"}};if(k>0&&(I.member_id=k),o&&(I.device=s),c&&(I.app=p),f.enabled&&(I.debug=f,t.logInfo("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(f,null,4))),r&&r.gdprConsent&&(I.gdpr_consent={consent_string:r.gdprConsent.consentString,consent_required:r.gdprConsent.gdprApplies}),r&&r.refererInfo){var x={rd_ref:encodeURIComponent(r.refererInfo.referer),rd_top:r.refererInfo.reachedTop,rd_ifs:r.refererInfo.numIframes,rd_stk:r.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")};I.referrer_detection=x}return{method:"POST",url:"//ib.adnxs.com/ut/v3/prebid",data:JSON.stringify(I),bidderRequest:r}},interpretResponse:function(e,r){var a=this,n=r.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(n.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),t.logError(o),i}if(e.tags&&e.tags.forEach(function(e){var r,o=(r=e)&&r.ads&&r.ads.length&&d()(r.ads,function(e){return e.rtb});if(o&&0!==o.cpm&&u()(a.supportedMediaTypes,o.ad_type)){var p=function(e,r,a){var n=t.getBidRequest(e.uuid,[a]),i={requestId:e.uuid,cpm:r.cpm,creativeId:r.creative_id,dealId:r.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:n.adUnitCode,appnexus:{buyerMemberId:r.buyer_member_id,dealPriority:r.deal_priority,dealCode:r.deal_code}};if(r.rtb.video){if(m(i,{width:r.rtb.video.player_width,height:r.rtb.video.player_height,vastUrl:r.rtb.video.asset_url,vastImpUrl:r.notify_url,ttl:3600}),r.renderer_url){var o=t.deepAccess(a.bids[0],"renderer.options");m(i,{adResponse:e,renderer:I(i.adUnitCode,r,o)}),i.adResponse.ad=i.adResponse.ads[0],i.adResponse.ad.video=i.adResponse.ad.rtb.video}}else if(r.rtb[s.b]){var d=r.rtb[s.b];i[s.b]={title:d.title,body:d.desc,body2:d.desc2,cta:d.ctatext,rating:d.rating,sponsoredBy:d.sponsored,privacyLink:d.privacy_link,address:d.address,downloads:d.downloads,likes:d.likes,phone:d.phone,price:d.price,salePrice:d.saleprice,clickUrl:d.link.url,displayUrl:d.displayurl,clickTrackers:d.link.click_trackers,impressionTrackers:d.impression_trackers,javascriptTrackers:d.javascript_trackers},d.main_img&&(i.native.image={url:d.main_img.url,height:d.main_img.height,width:d.main_img.width}),d.icon&&(i.native.icon={url:d.icon.url,height:d.icon.height,width:d.icon.width})}else{m(i,{width:r.rtb.banner.width,height:r.rtb.banner.height,ad:r.rtb.banner.content});try{var p=r.rtb.trackers[0].impression_urls[0],u=t.createTrackPixelHtml(p);i.ad+=u}catch(e){t.logError("Error appending tracking pixel",e)}}return i}(e,o,n);p.mediaType=function(e){var r=e.ad_type;return r===s.c?s.c:r===s.b?s.b:s.a}(o),i.push(p)}}),e.debug&&e.debug.debug_info){var p="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;p=p.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),t.logMessage("https://console.appnexus.com/docs/understanding-the-debug-auction"),t.logMessage(p)}return i},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html"}]},transformBidParams:function(e,r){return e=t.convertTypes({member:"string",invCode:"string",placementId:"number",keywords:t.transformBidderParamKeywords},e),r&&(e.use_pmt_rule="boolean"==typeof e.usePaymentRule&&e.usePaymentRule,e.usePaymentRule&&delete e.usePaymentRule,_(e.keywords)&&e.keywords.forEach(k),Object.keys(e).forEach(function(r){var a=t.convertCamelToUnderscore(r);a!==r&&(e[a]=e[r],delete e[r])})),e}};function _(e){return!!(t.isArray(e)&&e.length>0)}function k(e){_(e.value)&&""===e.value[0]&&delete e.value}function I(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.a.install({id:r.renderer_id,url:r.renderer_url,config:a,loaded:!1,adUnitCode:e});try{i.setRender(E)}catch(e){t.logWarn("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:function(){return t.logMessage("AppNexus outstream video impression event")},loaded:function(){return t.logMessage("AppNexus outstream video loaded event")},ended:function(){t.logMessage("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),i}function w(e){var r,a,n={};if(n.sizes=x(e.sizes),n.primary_size=n.sizes[0],n.ad_types=[],n.uuid=e.bidId,e.params.placementId?n.id=parseInt(e.params.placementId,10):n.code=e.params.invCode,n.allow_smaller_sizes=e.params.allowSmallerSizes||!1,n.use_pmt_rule=e.params.usePaymentRule||!1,n.prebid=!0,n.disable_psa=!0,e.params.reserve&&(n.reserve=e.params.reserve),e.params.position&&(n.position={above:1,below:2}[e.params.position]||0),e.params.trafficSourceCode&&(n.traffic_source_code=e.params.trafficSourceCode),e.params.privateSizes&&(n.private_sizes=x(e.params.privateSizes)),e.params.supplyType&&(n.supply_type=e.params.supplyType),e.params.pubClick&&(n.pubclick=e.params.pubClick),e.params.extInvCode&&(n.ext_inv_code=e.params.extInvCode),e.params.externalImpId&&(n.external_imp_id=e.params.externalImpId),!t.isEmpty(e.params.keywords)){var i=t.transformBidderParamKeywords(e.params.keywords);i.length>0&&i.forEach(k),n.keywords=i}if((e.mediaType===s.b||t.deepAccess(e,"mediaTypes.".concat(s.b)))&&(n.ad_types.push(s.b),e.nativeParams)){var o=(r=e.nativeParams,a={},Object.keys(r).forEach(function(e){var n=v[e]&&v[e].serverName||v[e]||e,t=v[e]&&v[e].requiredParams;a[n]=m({},t,r[e]);var i=v[e]&&v[e].minimumParams;if(t&&i){var s=Object.keys(r[e]),o=Object.keys(t);0===s.filter(function(e){return!u()(o,e)}).length&&(a[n]=m({},a[n],i))}}),a);n[s.b]={layouts:[o]}}var d=t.deepAccess(e,"mediaTypes.".concat(s.c)),p=t.deepAccess(e,"mediaTypes.video.context");return(e.mediaType===s.c||d)&&n.ad_types.push(s.c),(e.mediaType===s.c||d&&"outstream"!==p)&&(n.require_asset_url=!0),e.params.video&&(n.video={},Object.keys(e.params.video).filter(function(e){return u()(f,e)}).forEach(function(r){return n.video[r]=e.params.video[r]})),(t.isEmpty(e.mediaType)&&t.isEmpty(e.mediaTypes)||e.mediaType===s.a||e.mediaTypes&&e.mediaTypes[s.a])&&n.ad_types.push(s.a),n}function x(e){var r=[],a={};if(t.isArray(e)&&2===e.length&&!t.isArray(e[0]))a.width=parseInt(e[0],10),a.height=parseInt(e[1],10),r.push(a);else if("object"===c(e))for(var n=0;n<e.length;n++){var i=e[n];(a={}).width=parseInt(i[0],10),a.height=parseInt(i[1],10),r.push(a)}return r}function C(e){return!!e.params.user}function A(e){return!!parseInt(e.params.member,10)}function P(e){if(e.params)return!!e.params.app}function R(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function T(e){return!!e.debug}function E(e){e.renderer.push(function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,r,a){e.renderer.handleVideoEvent({id:r,eventName:a})}.bind(null,e))})}Object(i.registerBidder)(h)}},[133])},{}]},{},[1]);